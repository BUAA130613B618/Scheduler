/*server.c*/

#include<stdio.h>
#include<stdlib.h>
#include<sys/stat.h>
#include<unistd.h>
#include<linux/stat.h>

#define FIFO "MYFIFO"
#define BUFLEN 100

int main()
{
	FILE *fp;
	char buf[BUFLEN];
	/*文件屏蔽字*/
	umask(0);
	/*利用mkfifo创建FIFO*/
	if(mkfifo(FIFO, S_IFIFO | 0666) < 0)//返回负值表示创建FIFO失败
		return -1;
	while(1){
		fp = fopen(FIFO, "r");
		fgets(buf, sizeof(buf), fp);
		printf("Server received: %s\n", buf);
		fclose(fp);
	}
	return 0;
}
